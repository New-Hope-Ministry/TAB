async function getChapter(){let e=Number(activeBookID.slice("id-book".length)),t=Number(activeChapterID.slice("id-chapter".length)),n=verses.findIndex((n=>n.bid===e&&n.cn===t));removeElements("id-page");let s,a,i,o,r,d,c=document.createElement("h2"),l=document.getElementById("id-page");if(document.getElementById("id-MenuBtn2").textContent=document.getElementById(activeBookID).textContent,c.textContent=`${document.getElementById(activeBookID).textContent} ${t}`,document.getElementById("id-bottomTitleLine").textContent=c.textContent,isTWF){let e=document.createElement("span");e.classList.add("cs-edited"),e.textContent=` TWF - Last Edited: ${dateEdited}`,c.appendChild(e)}for(l.appendChild(c),verseCount=0;n<verses.length&&verses[n].cn===t&&verses[n].bid===e;){if(s=document.createElement("p"),s.id=`id-p${verses[n].vid}`,a=verses[n].pn,a>0&&paragraphLayoutDefault)for(;verses[n].pn===a;){i=document.createElement("span"),i.id=`id-versNumber${verses[n].vn}`,d=1===verses[n].vn?`${verses[n].vn} `:` ${verses[n].vn} `;let e=verses[n].vt;1===verses[n].jq?i.innerHTML=JesusQuote(e,d):(o=document.createElement("span"),o.classList.add("cs-verseNumber"),o.textContent=d,r=document.createTextNode(e),i.appendChild(o),i.appendChild(r)),s.appendChild(i),n++,verseCount++}else{i=document.createElement("span"),i.id=`id-versNumber${verses[n].vn}`,d=`${verses[n].vn} `;let e=verses[n].vt;1===verses[n].jq?i.innerHTML=JesusQuote(e,d):(o=document.createElement("span"),o.classList.add("cs-verseNumber"),o.textContent=d,r=document.createTextNode(e),i.appendChild(o),i.appendChild(r)),s.classList.add("cs-singleVerse"),s.appendChild(i),n++,verseCount++}l.appendChild(s)}setFontSize(),document.getElementById("id-MenuBtn3").textContent=`${document.getElementById(activeChapterID).textContent}:`}async function getChapter1(){let e=Number(activeBookID.slice("id-book".length)),t=Number(activeChapterID.slice("id-chapter".length)),n=verses1.findIndex((n=>n.bid===e&&n.cn===t));removeElements("id-page1");let s,a,i,o,r,d,c=document.createElement("h2"),l=document.getElementById("id-page1");if(c.textContent=`${document.getElementById(activeBookID).textContent} ${t}`,document.getElementById("id-bottomTitleLine").textContent=c.textContent,isTWF){let e=document.createElement("span");e.classList.add("cs-edited"),e.textContent=` TWF - Last Edited: ${dateEdited}`,c.appendChild(e)}for(l.appendChild(c),verseCount=0;n<verses1.length&&verses1[n].cn===t&&verses1[n].bid===e;){if(s=document.createElement("p"),s.id=`id-pA${verses[n].vid}`,a=verses[n].pn,a>0&&paragraphLayoutDefault)for(;verses[n].pn===a;){i=document.createElement("span"),i.id=`id-versNumberA${verses[n].vn}`,d=1===verses[n].vn?`${verses1[n].vn} `:` ${verses1[n].vn} `;let e=verses1[n].vt;1===verses1[n].jq?i.innerHTML=JesusQuote(e,d):(o=document.createElement("span"),o.classList.add("cs-verseNumber"),o.textContent=d,r=document.createTextNode(e),i.appendChild(o),i.appendChild(r)),s.appendChild(i),n++,verseCount++}else{i=document.createElement("span"),i.id=`id-versNumberA${verses[n].vn}`,d=`${verses[n].vn} `;let e=verses1[n].vt;1===verses1[n].jq?i.innerHTML=JesusQuote(e,d):(o=document.createElement("span"),o.classList.add("cs-verseNumber"),o.textContent=d,r=document.createTextNode(e),i.appendChild(o),i.appendChild(r)),s.classList.add("cs-singleVerse"),s.appendChild(i),n++,verseCount++}l.appendChild(s)}setFontSize()}async function getDefaults(){const e=new URLSearchParams(window.location.search);let t=localStorage.getItem("redLetter");t&&(redLetterDefault=t);let n=e.get("verid");n&&(activeVersionID=`id-version${n}`),activeVersionID||(activeVersionID=localStorage.getItem("activeVersionID")),activeVersionID||(activeVersionID=defaultVersionID);let s=Number(activeVersionID.slice("id-version".length)),a=versions.findIndex((e=>e.id===s));activeLanguageID=versions[a].lid;let i=e.get("bid");i&&(activeBookID=`id-book${i}`),activeBookID||(activeBookID=localStorage.getItem("activeBookID")),activeBookID||(activeBookID=defaultBookID);let o=e.get("cn");o&&(activeChapterID=`id-chapter${o}`),activeChapterID||(activeChapterID=localStorage.getItem("activeChapterID")),activeChapterID||(activeChapterID=defaultChapterID),setTheme=localStorage.getItem("setTheme"),activeFontSize=localStorage.getItem("activeFontSize"),activeFontSize?activeFontSize=Number(activeFontSize):activeFontSize=1.06,activeFontSizeCount=localStorage.getItem("activeFontSizeCount"),activeFontSizeCount?activeFontSizeCount=Number(activeFontSizeCount):activeFontSizeCount=0;let r=e.get("verid1");r&&(activeVersion1ID=`id-versionA${r}`),activeVersion1ID||(activeVersion1ID=localStorage.getItem("activeVersion1ID")),activeVersion1ID||(activeVersion1ID=defaultVersion1ID);let d=Number(activeVersion1ID.slice("id-versionA".length)),c=versions.findIndex((e=>e.id===d));return activeLanguage1ID=versions[c].lid,!0}async function getVersion(e=null){let t=null;e&&(t=e.target.id),t&&"id-resetDefaults"!==t||(t=activeVersionID);let n=document.getElementById(t),s=Number(n.dataset.index),a=`data/${versions[s].ar}/${versions[s].ar}Verses.json`;"TWF"===versions[s].ar?isTWF=!0:isTWF=!1;try{const e=await fetch(a);if(!e.ok)throw new Error(e.status);verses=await e.json(),await getChapter(),activeVersionID=n.id,document.getElementById("id-MenuBtn1").textContent=versions[s].ar,document.getElementById("id-headline").textContent=versions[s].t}catch(e){let t=e.message;switch(e.message){case"500":t="Network fetch error: 500A!";break;case"503":t="No internet connection error: 503A!";break}alert(t)}return closeBoxes(),boxesAreOpen=!1,!0}async function getVersion1(e=null){let t=null;e&&(t=e.target.id),t||(t=activeVersion1ID);let n=document.getElementById(t),s=Number(n.dataset.index),a=`data/${versions[s].ar}/${versions[s].ar}Verses.json`;"TWF"===versions[s].ar?isTWF=!0:isTWF=!1;try{const e=await fetch(a);if(!e.ok)throw new Error(e.status);verses1=await e.json(),await getChapter1(),activeVersion1ID=n.id,document.getElementById("id-MenuBtn4").textContent=versions[s].ar,document.getElementById("id-headline1").textContent=versions[s].t}catch(e){let t=e.message;switch(e.message){case"500":t="Network fetch error: 500A!";break;case"503":t="No internet connection error: 503A!";break}alert(t)}return closeBoxes(),boxesAreOpen=!1,!0}window.addEventListener("load",(async()=>{let e=!1;e=await getDefaults(),e&&(e=!1,e=await loadLanguages()),e&&(e=!1,e=await loadLanguages1()),e&&(e=!1,e=await loadVersions()),e&&(e=!1,e=await loadVersions1()),e&&(e=!1,e=await loadBooks()),e&&(e=!1,e=await loadChapters(),allLoaded=!0),e&&(e=!1,e=await getVersion()),e&&(e=!1,e=await getVersion1()),e&&allLoaded&&(locateBox("id-header","id-mainPage",-10),setTimeout((()=>{document.getElementById("id-loader").style.display="none",bookWidth()}),130)),e&&("1"===setTheme&&(darkTheme(),toggleTheme(),rotateTheme=!1),startUp()),window.addEventListener("resize",adjustPosition)}));